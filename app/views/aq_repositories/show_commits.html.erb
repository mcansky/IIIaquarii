<% content_for :head do %>
  <title><%= t(:commits_list, :scope => :repositories) %> - <%= Settings.application.name %></title>
<% end %>

<div id="repository">
  <%= render "infos", :repository => @repository %>

  <div class="repository">
    <%= render "people", :repository => @repository %>

    <p class="desc"><%= @repository.desc %></p>

    <div id="commits_list">
      <% if @repository.branches.size != 0 %>
	<% branch = "master" %>
	<% branch = params[:branch] if params[:branch] %>
        <% commits = @grit_repo.commits(branch) %>
        <% for commit in commits %>
          <div class="commit">
            <div class="commit_date">
              <%# branch to url here %>
              <%= link_to "#{commit.sha.slice(0,7)}", show_commit_user_aq_repository_url(@repository.owner, @repository, commit.sha)  %>...
              <%= "on: #{commit.date.strftime("%I:%M %p %x").downcase} by: #{commit.author.name} #{commit.author.email}" %>
            </div>
            <% # Typo '=' ? %>
            <div class="commit_m=essage">
              <%= commit.message %>
            </div>
          </div>
          <br />
        <% end %>
      <% end %>
    </div>

    <div class="clear"></div>
  </div>
</div>
